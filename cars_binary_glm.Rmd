---
title: "Engine Type & MPG"
author: "M. Roberts"
date: "2025-09-11"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


library(knitr)
library(leaflet)
library(ggplot2)
library(dplyr)
library(tidyverse)
library(janitor)
library(lme4)
library(performance)
library(arm)

data(mtcars)

cars <- mtcars

small_cars <- dplyr::select(cars, mpg, vs)

```


In this example, I will be looking at the relationship between miles per gallon (mpg) and engine type (straight or v-shaped).

![](engine_type.jpg)


In my first model, I ran a GLM using the binomial family and link logit. 
```{r GLM, include=TRUE}

ggplot(cars, aes(mpg, vs)) + 
      geom_point() +
      geom_smooth(method="glm", color = "firebrick", method.args=list(family="binomial"(link="logit"))) +
      xlab ("Miles Per Gallon") +
      ylab ("Straight Engine") +
      theme_classic() +
      theme(panel.border = element_rect(fill = NA))

car_model <- glm(vs ~ mpg, data=cars, family=binomial)
car_model
```


```{r binned residuals, include=TRUE}

x <- predict(car_model)
y <- resid(car_model)
binnedplot(x, y)

coef(car_model)
confint(car_model)
summary(car_model)

```

I calculated the maximum predicted effect on the response of a miles per gallon change by dividing the slope by 4. I took 0.43/4 = 0.1076. Turned that calculated number into a percent to get 10.76%. This means that a 1 mile per gallon increase corresponds to a 10.76% increase of a straight engine type.



